import{r as m,j as e,B as b,A as v,U as N,T as V,a as T}from"./index-zzFyhS3F.js";import{C as y,G as B,p as U,i as P,f as M}from"./GanttChart-C4OsGmSI.js";import{K as u}from"./KPICard-QHlU6-cb.js";import{C as O}from"./check-circle-2-Clqhd3yE.js";import{T as S}from"./target-BhVYZTZ2.js";import{R as w,C as q,T as D,L as G,B as A,X as F,Y as $,a as K}from"./BarChart-BMm4yCV-.js";import{P as Q,a as X}from"./PieChart-CtblTHAS.js";import{C as Y}from"./clock-Dx-ajNhx.js";const te=({productInitiatives:r=[],productBugRelease:o=[]})=>{console.log("ðŸ”µ [ProductRoadmapView] Componente renderizado:",{initiativesCount:r.length,bugsCount:o.length,sampleInitiative:r[0],sampleBug:o[0],allInitiatives:r.slice(0,5).map(a=>({initiative:a.initiative,effort:a.effort,completion:a.completion,status:a.status,startDate:a.startDate,expectedDate:a.expectedDate,endDate:a.endDate,team:a.team,quarter:a.quarter})),fieldsAvailable:r.length>0?Object.keys(r[0]):[]});const h=m.useMemo(()=>{const a=r.length,s=r.reduce((l,n)=>l+(parseFloat(n.effort)||0),0),t=r.map(l=>{const n=parseFloat(l.completion);if(!isNaN(n)&&n>0)return n;const i=(l.status||"").toLowerCase();return i==="complete"?100:i==="early"||i==="on time"?75:i==="delay"?50:i==="incomplete"?25:0}),p=a>0?Math.round(t.reduce((l,n)=>l+n,0)/a):0,d=r.filter(l=>{const n=(l.status||"").toLowerCase(),i=parseFloat(l.completion)||0;return n==="complete"||n.includes("done")||n.includes("completed")||i>=100}).length,f=r.filter(l=>{const n=(l.status||"").toLowerCase(),i=parseFloat(l.completion)||0,R=parseFloat(l.effort)||0;return n!=="complete"&&!n.includes("not started")&&n!==""&&(i>0||R>0)}).length,x=o.filter(l=>l.type==="Bug").length,j=o.filter(l=>l.release).map(l=>l.release),c=j.length>0?j[0]:"TBD";return{totalInitiatives:a,totalEffort:s,avgCompletion:p,completed:d,inProgress:f,totalBugs:x,nextRelease:c}},[r,o]),z=m.useMemo(()=>{const a={};return r.forEach(s=>{const t=s.quarter||"Unassigned";a[t]||(a[t]=[]),a[t].push(s)}),a},[r]),g=m.useMemo(()=>{const a=o.filter(t=>t.type==="Bug").length,s=o.filter(t=>t.type==="Feature").length;return[{name:"Bugs",value:a},{name:"Features",value:s}]},[o]),C=m.useMemo(()=>{const a={High:0,Medium:0,Low:0};return o.forEach(s=>{s.priority&&a.hasOwnProperty(s.priority)&&a[s.priority]++}),Object.entries(a).map(([s,t])=>({name:s,value:t}))},[o]),k=m.useMemo(()=>{const a={};return r.forEach(s=>{s.team&&(a[s.team]||(a[s.team]=0),a[s.team]++)}),Object.entries(a).map(([s,t])=>({name:s,value:t}))},[r]),E=m.useMemo(()=>{const a=r.filter(s=>{const t=(s.status||"").toLowerCase();if(t.includes("not started")||t==="")return!1;const p=s.startDate&&s.startDate.trim()!=="",d=s.endDate&&s.endDate.trim()!=="",f=s.expectedDate&&s.expectedDate.trim()!=="";return(p||f)&&(d||f)}).map(s=>({...s,startDate:s.startDate||s.expectedDate||null,endDate:s.endDate||s.expectedDate||null})).filter(s=>s.startDate&&s.endDate&&s.startDate.trim()!==""&&s.endDate.trim()!=="");return console.log("ðŸ”µ [ProductRoadmapView] Gantt data preparado:",{totalInitiatives:r.length,filteredCount:a.length,sampleFiltered:a.slice(0,3).map(s=>({initiative:s.initiative,startDate:s.startDate,endDate:s.endDate,status:s.status}))}),a},[r]),L=["#00D9FF","#0EA5E9","#22D3EE","#67e8f9"];return r.length===0?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center space-y-6",children:[e.jsx("div",{className:"p-6 rounded-full bg-slate-800/50 border border-white/5",children:e.jsx(b,{size:48,className:"text-slate-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Product Roadmap"}),e.jsxs("p",{className:"text-slate-400 max-w-md mx-auto",children:["No product initiatives data available.",e.jsx("br",{}),e.jsx("span",{className:"text-cyan-400 text-sm font-medium mt-2 block",children:"Loading from CSV..."})]})]})]})}):e.jsxs("div",{className:"space-y-8 animate-shimmer",style:{animation:"fadeIn 0.5s ease-out"},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx(u,{title:"Total Initiatives",value:h.totalInitiatives,label:"On Track Active projects",trend:"positive",color:"blue",icon:b}),e.jsx(u,{title:"Total Effort",value:`${h.totalEffort}d`,label:"On Track Days estimated",trend:"positive",color:"blue",icon:y}),e.jsx(u,{title:"Avg. Completion",value:`${h.avgCompletion}%`,label:"On Track Overall progress",trend:"positive",color:"emerald",icon:v}),e.jsx(u,{title:"Completed",value:h.completed,label:"On Track Done initiatives",trend:"positive",color:"emerald",icon:O}),e.jsx(u,{title:"In Progress",value:h.inProgress,label:"On Track Active work",trend:"positive",color:"blue",icon:v})]}),E.length>0&&e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-cyan-400"}),"Product Roadmap Timeline"]})}),e.jsx(B,{data:E})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-cyan-400"}),"Strategic Initiatives by Quarter"]}),e.jsxs("span",{className:"text-sm text-slate-400",children:[r.length," initiatives"]})]}),e.jsx("div",{className:"space-y-8",children:Object.entries(z).sort().map(([a,s])=>e.jsxs("div",{className:"border-l-2 border-cyan-500/30 pl-6 pb-8 last:pb-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"px-3 py-1 bg-cyan-500/20 border border-cyan-500/30 rounded-lg",children:e.jsx("h4",{className:"text-cyan-400 font-bold text-lg",children:a})}),e.jsxs("span",{className:"text-sm text-slate-400",children:[s.length," initiative",s.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:s.map((t,p)=>{const d=c=>{if(!c)return null;try{const l=U(c);if(P(l))return M(l,"MMM dd, yyyy");const n=c.split("/");if(n.length===3){const i=new Date(n[2],n[1]-1,n[0]);if(P(i))return M(i,"MMM dd, yyyy")}}catch{return c}return c},x=(c=>{const l=(c||"").toLowerCase();return l.includes("done")||l.includes("completed")?{bg:"bg-emerald-500/20",text:"text-emerald-400",border:"border-emerald-500/30",icon:O}:l.includes("progress")||l.includes("active")?{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",icon:v}:l.includes("blocked")||l.includes("stuck")?{bg:"bg-rose-500/20",text:"text-rose-400",border:"border-rose-500/30",icon:T}:{bg:"bg-slate-700/50",text:"text-slate-400",border:"border-slate-600/30",icon:Y}})(t.status),j=x.icon;return e.jsxs("div",{className:"group bg-gradient-to-br from-slate-800/60 to-slate-900/60 p-5 rounded-xl border border-white/5 hover:border-cyan-500/30 transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h5",{className:"text-slate-100 font-semibold text-sm leading-tight pr-2 flex-1",title:t.initiative,children:t.initiative}),e.jsxs("div",{className:`flex items-center gap-1.5 px-2.5 py-1 rounded-lg border ${x.bg} ${x.border} ${x.text} shrink-0`,children:[e.jsx(j,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:t.status||"Planned"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-xs",children:[t.team&&e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-slate-300",children:t.team})]}),t.ba&&e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-slate-300",children:t.ba})]})]}),(t.startDate||t.expectedDate)&&e.jsxs("div",{className:"flex items-center gap-3 mb-4 text-xs text-slate-500",children:[t.startDate&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(y,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Start: ",d(t.startDate)]})]}),t.expectedDate&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(S,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Due: ",d(t.expectedDate)]})]})]}),t.effort&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-slate-400",children:"Effort"}),e.jsxs("span",{className:"text-cyan-400 font-medium",children:[t.effort," days"]})]})}),t.completion!==void 0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-400",children:"Progress"}),e.jsxs("span",{className:`font-semibold ${t.completion>=90?"text-emerald-400":t.completion>=50?"text-blue-400":t.completion>0?"text-amber-400":"text-slate-500"}`,children:[t.completion,"%"]})]}),e.jsx("div",{className:"h-2 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${t.completion>=90?"bg-emerald-500":t.completion>=50?"bg-blue-500":t.completion>0?"bg-amber-500":"bg-slate-600"}`,style:{width:`${t.completion}%`}})})]}),t.designer&&e.jsx("div",{className:"mt-3 pt-3 border-t border-white/5",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-500",children:[e.jsx(N,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Designer: ",e.jsx("span",{className:"text-slate-300",children:t.designer})]})]})})]},p)})})]},a))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-cyan-400"}),"Bug vs Feature Mix"]}),e.jsxs("span",{className:"text-xs text-slate-400",children:[o.length," total"]})]}),e.jsx("div",{className:"h-[220px]",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(Q,{children:[e.jsx(X,{data:g,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:g.map((a,s)=>e.jsx(q,{fill:L[s%L.length]},`cell-${s}`))}),e.jsx(D,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc",borderRadius:"8px",padding:"8px 12px"}}),e.jsx(G,{wrapperStyle:{fontSize:"12px",color:"#94a3b8"},iconType:"circle"})]})})}),g.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-white/5 flex justify-around text-xs",children:g.map((a,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 mb-1",children:a.name}),e.jsx("div",{className:"text-white font-semibold",children:a.value})]},s))})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-cyan-400"}),"Priority Breakdown"]}),e.jsxs("span",{className:"text-xs text-slate-400",children:[C.reduce((a,s)=>a+s.value,0)," items"]})]}),e.jsx("div",{className:"h-[220px]",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(A,{data:C,children:[e.jsx(F,{dataKey:"name",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx($,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(D,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc",borderRadius:"8px",padding:"8px 12px"},cursor:{fill:"rgba(255,255,255,0.05)"}}),e.jsx(K,{dataKey:"value",fill:"#0EA5E9",radius:[6,6,0,0]})]})})})]}),e.jsxs("div",{className:"glass rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-cyan-400"}),"Initiatives per Team"]}),e.jsxs("span",{className:"text-xs text-slate-400",children:[k.length," teams"]})]}),e.jsx("div",{className:"h-[220px]",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(A,{data:k,layout:"vertical",children:[e.jsx(F,{type:"number",hide:!0}),e.jsx($,{dataKey:"name",type:"category",width:100,stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(D,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc",borderRadius:"8px",padding:"8px 12px"},cursor:{fill:"rgba(255,255,255,0.05)"}}),e.jsx(K,{dataKey:"value",fill:"#22D3EE",radius:[0,6,6,0]})]})})})]})]})]})};export{te as default};
