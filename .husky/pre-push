echo "ğŸ§ª Ejecutando pruebas antes de push..."

# Ejecutar pruebas unitarias
echo "ğŸ“¦ Ejecutando pruebas unitarias..."
npm run test || {
  echo "âŒ Las pruebas unitarias fallaron. Por favor, corrige los errores antes de hacer push."
  exit 1
}

# Ejecutar pruebas e2e solo con Chromium (mÃ¡s rÃ¡pido)
# En CI se ejecutan todas las pruebas e2e automÃ¡ticamente
if [ -z "$CI" ]; then
  echo "ğŸŒ Ejecutando pruebas e2e (Chromium)..."
  npx playwright test --project=chromium || {
    echo "âŒ Las pruebas e2e fallaron. Por favor, corrige los errores antes de hacer push."
    exit 1
  }
else
  echo "â­ï¸  Saltando pruebas e2e en CI (se ejecutan en GitHub Actions)"
fi

echo "âœ… Todas las pruebas pasaron. Procediendo con push..."
